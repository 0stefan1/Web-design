<div class="settings-container-big">

        <span class="fas fa-window-close span" ui-sref="sensorsHome.sensors"></span>

        <img src="/Home/images-home/C4G-logo-BG-white-2.svg" alt="C4G-full-moto" class="settings-image">

        <div class="settings-container container">
                <h2>Account settings</h2>

                <div ng-show="vm.showSettingsError" id="alert-error"><p>{{error}}</p></div>
                <div ng-show="vm.showSettingsMessage" id="alert-succesful"><p>{{message}}</p></div>
                <div ng-show ="vm.showValidError" id="alert-error"><p>{{validError}}</p></div>

            <form name="nameEdit" novalidate>
              <div class="box-text">

                  <h class="text-colapse-settings h-parrent-hover">Username: 
                    <h class="h-color">{{user.firstName}} {{user.lastName}}</h> 
                      <span ng-click="vm.collapsUserName()" class="fas fa-chevron-down span-settings" onclick="showSettingsColapse(this)"> </span>
                    <!-- <a class="hover-edit"> Edit</a> -->
                  </h>

                  <div ng-show="vm.showUserName" class="settings-input-container box-border-container">
                    <div ng-class="{'has-error': nameEdit.fname.$invalid && nameEdit.fname.$dirty}">
                      <input class="settings-input-filed" type="text" placeholder="The new first name" class="form-control" ng-model="editFirstname" ng-pattern="/^[a-zA-Z-\s]*$/" name="fname" name-valid required />
                      <div class="help-block has-error">
                        <div ng-show="nameEdit.fname.$error.required && nameEdit.fname.$dirty">This field is required!</div>
                        <div ng-show="!nameEdit.fname.$error.required && nameEdit.fname.$error.pattern ">The name is invalid! Use only: 'A-Z', 'a-z', '-'</div>
                        <div ng-show="!nameEdit.fname.$error.required && !nameEdit.fname.$error.pattern && !nameEdit.fname.$valid">The name is invalid!</div>
                      </div>
                    </div>
                    <div class="form-group" ng-class="{'has-error': nameEdit.lname.$invalid && nameEdit.lname.$dirty}">
                      <input class="settings-input-filed" type="text" placeholder="The new last name" ng-model="editLastname" class="form-control" ng-pattern="/^[a-zA-Z-\s]*$/"  name="lname" required>
                      <div class="help-block has-error">
                          <div ng-show="nameEdit.lname.$error.required && nameEdit.lname.$dirty">This field is required!</div>
                          <div ng-show="!nameEdit.lname.$error.required && nameEdit.lname.pattern">The name is invalid! Use only: 'A-Z', 'a-z', '-'!</div>
                          <div ng-show="!nameEdit.lname.$error.required && !nameEdit.lname.pattern && !nameEdit.lname.$valid">The name is invalid!</div>
                      </div>
                    </div>
                  </div>
              </div>
            </form>

           <form name="emailEdit" novalidate>
            <div class="box-text">

                <h class="text-colapse-settings h-parrent-hover">Email address:
                  <h class="h-color">{{user.email}}</h>
                    <span ng-click="vm.collapsEmailAddress()" class="fas fa-chevron-down span-settings" onclick="showSettingsColapse(this)"></span>
                  <!-- <a class="hover-edit"> Edit</a>  -->
                </h>

              <div ng-show="vm.showEmailAddress" class="settings-input-container box-border-container">
                  <div class="form-group" ng-class="{'has-error': emailEdit.currentEmail.$invalid && emailEdit.currentEmail.$dirty}">
                      <input class="settings-input-filed" type="email" placeholder="The current email address" ng-model="currentEmail" class="form-control" name="currentEmail" ng-pattern="/^[A-Za-z0-9._@]*$/" required>
                      <div class="help-block has-error">
                        <div ng-show="emailEdit.currentEmail.$error.required && emailEdit.currentEmail.$dirty">This field is required!</div>
                        <div ng-show="emailEdit.currentEmail.$error.email || emailEdit.currentEmail.$error.pattern">This email address is invalid!</div>
                      </div>
                    </div>
                  <div class="form-group" ng-class="{'has-error': emailEdit.email.$invalid && emailEdit.email.$dirty}">
                    <input class="settings-input-filed" type="email" placeholder="The new email address" ng-model="editEmail" class="form-control" name="email" ng-pattern="/^[A-Za-z0-9._@]*$/" required>
                    <div class="help-block has-error">
                      <div ng-show="emailEdit.email.$error.required && emailEdit.email.$dirty">This field is required!</div>
                      <div ng-show="emailEdit.email.$error.email || emailEdit.email.$error.pattern">This email address is invalid!</div>
                    </div>
                  </div>
                  <div class="form-group" ng-class="{'has-error': emailEdit.confirmEmail.$invalid && emailEdit.confirmEmail.$dirty}">
                      <input class="settings-input-filed" type="email" placeholder="Confirm email address" ng-model="confirmEmail" ng-pattern="/^[a-zA-Z0-9._@]*$/" class="form-control" name="confirmEmail" required>
                      <div class="help-block has-error">
                        <div ng-show="emailEdit.confirmEmail.$error.required && emailEdit.confirmEmail.$dirty">This field is required!</div>
                        <div ng-show="emailEdit.confirmEmail.$error.email || emailEdit.confirmEmail.$error.pattern">This email address is invalid!</div>
                      </div>
                    </div>
              </div>
            </div>
          </form>

          <form name="passwordEdit">
            <div class="box-text">

                <h class="text-colapse-settings h-parrent-hover">Password 
                  <span ng-click="vm.collapsPassword()" class="fas fa-chevron-down span-settings" onclick="showSettingsColapse(this)"></span>
                  <!-- <a class="hover-edit"> Edit</a>  -->
                </h>

                <div ng-show="vm.showPassword" class="settings-input-container box-border-container">
                  <div class="form-group" ng-class="{'has-error': passwordEdit.pass.$invalid && passwordEdit.pass.$dirty}">
                    <input class="settings-input-filed" type="password" placeholder="Old password"  ng-model ="oldPassword" class="form-control" name="pass" required>
                    <div class="help-block has-error">
                      <div ng-show="passwordEdit.pass.$error.required && passwordEdit.pass.$dirty">This field is required!</div>
                    </div>
                  </div>
                  <div class="form-group" ng-class="{'has-error': passwordEdit.pass1.$invalid && passwordEdit.pass1.$dirty}">
                    <input class="settings-input-filed" type="password" placeholder="The new password" class="form-control" ng-model="editPassword" ng-minlength="6" name="pass1" required>
                    <div class="help-block has-error">
                      <div ng-show="passwordEdit.pass1.$error.required && passwordEdit.pass1.$dirty">This field is required!</div>
                      <div ng-show="!passwordEdit.pass1.$error.required && passwordEdit.pass1.$error.minlength">The password must have at least 6 characters!</div>
                    </div>
                  </div>
                  <div class="form-group" ng-class="{'has-error': passwordEdit.pass2.$invalid && passwordEdit.pass2.$dirty}">
                    <input class="settings-input-filed" type="password" placeholder="Repeat the new password" class="form-control" ng-model="confirmEditPass" name="pass2" valid-pass required>
                    <div class="help-block has-error">
                      <div ng-show="passwordEdit.pass2.$error.required && passwordEdit.pass2.$dirty">This field is required!</div>
                      <div ng-show="!passwordEdit.pass2.$error.required && passwordEdit.pass2.$error.noMatch && passwordEdit.pass1.$dirty">The passwords do not match!</div>
                    </div>
                  </div>
                </div>
            </div>
          </form>

          <form name="companyEdit">
            <div class="box-text">

                <h class="text-colapse-settings h-parrent-hover" >Company name: 
                  <h class="h-color">{{user.companyName}}</h> 
                    <span ng-click="vm.collapsCompanyName()" class="fas fa-chevron-down span-settings" onclick="showSettingsColapse(this)"></span>
                  <!-- <a class="hover-edit"> Edit</a>  -->
                </h>

                <div ng-show="vm.showCompanyName" class="settings-input-container box-border-container">
                  <div class="form-group" ng-class="{'has-error': companyEdit.cname.$invalid && companyEdit.cname.$dirty}">
                    <input class="settings-input-filed" type="text" placeholder="New company name" ng-model="editCompany" class="form-control" ng-pattern="/^[a-zA-Z0-9.-]*$/" name="cname" required>
                    <div class="help-block has-error">
                      <div ng-show="companyEdit.cname.$error.required && companyEdit.cname.$dirty">This field is requied!</div>
                      <div ng-show="!companyEdit.cname.$error.required && companyEdit.cname.$error.pattern">The company name is invalid!</div>
                    </div>
                  </div>
                </div>
            </div>
          </form>

          <form name="countryEdit">
            <div class="box-text">

                <h class="text-colapse-settings h-parrent-hover" >Country: 
                  <h class="h-color">{{user.country}}</h> 
                    <span ng-click="vm.collapsCountry()" class="fas fa-chevron-down span-settings" onclick="showSettingsColapse(this)"></span>
                  <!-- <a class="hover-edit"> Edit</a>  -->
                </h>

                <div ng-show="vm.showCountry" class="settings-input-container box-border-container">
                  <div class="form-group" ng-class="{'has-error': countryEdit.country.$invalid && countryEdit.country.$dirty}">
                    <select name="country" class="settings-input-filed" ng-model="editCountry" ng-options="country.name for country in countries" required>
                      <option selected disabled hidden value="">Romania</options>
                    </select>
                    <div class="help-block has-error">
                      <div ng-show="countryEdit.country.$error.required && countryEdit.country.$dirty">This field is required!</div>
                      <div ng-show="!countryEdit.country.$error.required && countryEdit.country.$error.pattern">The country name is invalid!</div>
                    </div>
                  </div>
                </div>
            </div>
          </form>

          <form name="phoneEdit">
            <div class="box-text">

                <h class="text-colapse-settings h-parrent-hover" >Phone number: 
                  <h class="h-color">{{user.phoneNumber}}</h> 
                    <span ng-click="vm.collapsPhoneNumber()" class="fas fa-chevron-down span-settings" onclick="showSettingsColapse(this)"></span>
                    <!-- <a class="hover-edit"> Edit</a>  -->
                </h>

                <div ng-show="vm.showPhoneNumber" class="settings-input-container box-border-container">
                  <div class="form-group" ng-class="{'has-error': phoneEdit.nphone.$invalid && phoneEdit.nphone.$dirty}">
                    <input class="settings-input-filed" type="text" placeholder="New number" ng-model="editPhone" ng-pattern="/^[0-9\s+]*$/" class="form-control" ng-maxlength="13" name="nphone" phone-validation required>
                    <div class="help-block has-error">
                        <div ng-show="phoneEdit.nphone.$error.required && phoneEdit.nphone.$dirty">This field is required!</div>
                        <div ng-show="!phoneEdit.nphone.$error.required && phoneEdit.nphone.$error.pattern">The phone number is invalid!</div>
                        <div ng-show="!phoneEdit.nphone.$error.required && !phoneEdit.nphone.$valid && phoneEdit.nphone.$error.maxlength">The phone number can't have more than 13 characters!</div>
                        <div ng-show="!phoneEdit.nphone.$error.required && !phoneEdit.nphone.$error.pattern && !phoneEdit.nphone.$error.maxlength && !phoneEdit.nphone.$valid">You have to enter the country dial code!</div>
                    </div>
                  </div>
                </div>
            </div>
          </form>

            <button type="button" ng-click="saveChanges(editFirstname, editLastname, currentEmail, editEmail, confirmEmail, password, editPassword, confirmEditPass ,oldPassword, editCompany, editCountry, editPhone)" >Save change</button>
            <p>Once the data is verified, it will be changed.</p>
        </div>

        <!-- fake elements for js -->
        <div class="progress-bar" id="myBar" style="display: none !important;"></div>
        <div id="header-scroll" class="fake" style="display: none !important;"></div>
        <div class="header-container" id="myTopnav" style="display: none !important; background-color: #333 !important;"></div>
          <div id="logoC4Gheader" style=" display: none !important; "></div>
        <!-- /fake elements for js -->
    </div>
